<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no">
  <meta name="theme-color" content="#0a1628">
  <title>QT Real Trading</title>

  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    html,body{height:100%;overflow:hidden}
    body{font-family:Arial,sans-serif;background:#0a1628;color:#fff;direction:rtl;display:flex;flex-direction:column;font-size:12.6px}

    .header{flex:0 0 auto;display:flex;justify-content:space-between;align-items:center;padding:4px 10px;background:#0f1d35;position:relative}
    .header::after{content:'';position:absolute;bottom:-8px;left:0;right:0;height:8px;background:linear-gradient(to bottom,#0f1d35,transparent);pointer-events:none;z-index:5}
    .header-left{display:flex;gap:8px;align-items:center}
    .header-center{display:flex;gap:8px;align-items:center}
    .header-right{display:flex;align-items:center;gap:8px}

    .icon-btn{width:38px;height:38px;background:rgba(255,255,255,.05);border-radius:8px;display:flex;align-items:center;justify-content:center;border:0;cursor:pointer;padding:0}
    .logo-btn img{width:100%;height:100%;display:block;object-fit:cover}

    /* ===== keep old balance box hidden (compat) ===== */
    .balance-box{display:none!important}
    .balance-label{font-size:9.5px;color:#fff;font-weight:700;letter-spacing:.3px;margin-bottom:2px}
    .balance-amount-old{font-size:15px;font-weight:900;letter-spacing:.4px;color:#fff}

    .wallet-btn{width:38px;height:38px;background:#16a34a;border-radius:8px;border:2px solid rgba(255,255,255,.15);cursor:pointer;display:flex;align-items:center;justify-content:center;padding:0;overflow:hidden}
    .wallet-btn img{width:100%;height:100%;display:block;object-fit:cover}

    .time-display{position:absolute;left:8px;top:calc(100% + 8px);font-size:11px;color:#8b9cb5;font-weight:700;letter-spacing:.4px;background:rgba(15,29,53,.95);padding:6px 12px;border-radius:6px;z-index:180;border:1px solid rgba(255,255,255,.1);display:flex;align-items:center;gap:6px}
    .time-display::before{content:'';width:6px;height:6px;background:#0f0;border-radius:50%;box-shadow:0 0 8px #0f0;animation:pulse 2s infinite}
    @keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}

    .chart-container{flex:1 1 auto;min-height:0;background:#0a1628;position:relative;overflow:hidden}
    .quick-actions{position:absolute;top:52px;left:8px;display:flex;flex-direction:column;gap:6px;z-index:190;pointer-events:none}
    .quick-actions button{pointer-events:auto}
    .qa-btn{width:44px;height:44px;background:#0f1d35;border:1px solid rgba(255,255,255,.12);border-radius:8px;display:flex;align-items:center;justify-content:center;padding:0;cursor:pointer;transition:background .15s}
    .qa-btn:hover{background:#1a2942}
    .qa-btn:active{background:#213554}

    .chart-frame{position:relative;width:100%;height:100%;overflow:hidden}
    .plot{position:absolute;inset:0;overflow:hidden}
    #chartCanvas{display:block;position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;touch-action:none;cursor:grab}
    #chartCanvas:active{cursor:grabbing}

    .candle-timer{position:absolute;color:rgba(255,255,255,.35);font-size:11px;font-weight:700;z-index:180;pointer-events:none;font-family:monospace}
    .price-line{position:absolute;left:0;right:0;height:2px;background:transparent;z-index:150;pointer-events:none;border-top:2px dashed rgba(255,255,255,.7)}
    .timeLabels{position:absolute;left:0;right:0;bottom:0;height:24px;background:rgba(10,22,40,.95);border-top:1px solid rgba(255,255,255,.08);pointer-events:none;z-index:160}
    .timeLabel{position:absolute;bottom:2px;font-size:8.5px;font-weight:900;color:rgba(255,255,255,.55);transform:translateX(-50%);white-space:nowrap}
    .timeLabel.major{color:rgba(255,215,0,.85);font-weight:900}

    #priceScale{position:absolute;top:0;right:0;bottom:0;width:50px;pointer-events:none;z-index:170;background:transparent!important;border:none!important;box-shadow:none!important}
    #priceScaleLabels{position:absolute;inset:0;background:transparent!important;border:none!important;box-shadow:none!important}
    #currentPrice{position:absolute;right:8px;transform:translateY(-50%);color:#000;font-size:10px;font-weight:900;white-space:nowrap;background:#ffd700!important;padding:4px 8px!important;border-radius:4px!important;box-shadow:0 0 10px rgba(255,215,0,.6)!important;text-shadow:none!important;border:1px solid rgba(255,215,0,.8)!important}
    #priceScale .pLabel{position:absolute;right:8px;transform:translateY(-50%);font-size:9px;font-weight:800;color:#fff;white-space:nowrap;background:transparent!important;box-shadow:none!important;border:none!important;text-shadow:0 0 6px rgba(255,255,255,.4)!important;padding:0!important;margin:0!important;filter:brightness(1.3)}
    #priceScale .pLabel.major{color:#fff;filter:brightness(1.5)}

    .controls{flex:0 0 auto;padding:9px 10.8px 0;background:#0f1d35}
    .timer-amount{display:flex;gap:7.2px;margin-bottom:9px}
    .trade-buttons{display:flex;gap:7.2px;margin:9px 0 5.4px}
    .trade-btn{flex:1;height:38px;border:0;border-radius:10.8px;font-size:13.5px;font-weight:800;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:7.2px;transition:transform .2s}
    .trade-btn:active{transform:scale(.96)}
    .buy-btn{background:linear-gradient(135deg,#0f0,#0c0);color:#fff}
    .buy-btn:before{content:"â†—";font-size:16.2px}
    .sell-btn{background:linear-gradient(135deg,#f00,#c00);color:#fff}
    .sell-btn:before{content:"â†˜";font-size:16.2px}
    .ai-trade-btn{flex:2;background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff}
    .ai-trade-btn:before{content:"AI";margin-right:4.5px;font-weight:900}

    .bottom-nav{flex:0 0 auto;background:#0f1d35;display:flex;justify-content:space-around;padding:7.2px 0;border-top:1px solid rgba(255,255,255,.05)}
    .nav-item{display:flex;flex-direction:column;align-items:center;gap:3.6px;color:#6b7a94;font-size:9px;cursor:pointer}
    .nav-item.active{color:#3b82f6}
    .nav-icon{width:21.6px;height:21.6px;display:flex;align-items:center;justify-content:center;font-size:16.2px}

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ACTIVE TRADES PANEL (unchanged)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .active-trades-panel{position:absolute;top:10px;right:58px;z-index:185;display:flex;flex-direction:column;gap:5px;pointer-events:none;max-width:170px}
    .trade-card{background:rgba(10,22,40,.93);border-radius:8px;padding:7px 10px;border:1px solid rgba(255,255,255,.1);border-left:3px solid;pointer-events:auto;backdrop-filter:blur(6px);min-width:155px}
    .buy-card{border-left-color:#00cc00}
    .sell-card{border-left-color:#ff3333}
    .tc-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}
    .tc-type{font-size:9px;font-weight:900;padding:2px 6px;border-radius:4px;letter-spacing:.3px}
    .tc-type.buy{background:rgba(0,204,0,.2);color:#00cc00}
    .tc-type.sell{background:rgba(255,51,51,.2);color:#ff3333}
    .tc-timer{font-size:11px;font-weight:900;font-family:monospace;color:#ffd700;letter-spacing:.5px}
    .tc-row{display:flex;justify-content:space-between;font-size:9px;margin-top:2px}
    .tc-row span:first-child{color:#8b9cb5}
    .tc-row span:last-child{color:#e0e0e0;font-weight:700}
    .tc-pnl{font-size:11px;font-weight:900;text-align:right;margin-top:4px;padding-top:3px;border-top:1px solid rgba(255,255,255,.07)}
    .tc-win{color:#00cc00}
    .tc-lose{color:#ff3333}

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       HISTORY PANEL (unchanged)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .history-panel{position:fixed;inset:0;background:#0a1628;z-index:400;transform:translateY(100%);transition:transform .3s cubic-bezier(.4,0,.2,1);display:flex;flex-direction:column;overflow:hidden}
    .history-panel.show{transform:translateY(0)}
    .history-header{flex:0 0 auto;display:flex;align-items:center;justify-content:space-between;padding:10px 14px;background:#0f1d35;border-bottom:1px solid rgba(255,255,255,.08)}
    .history-title{font-size:13px;font-weight:900;color:#fff}
    .history-close-btn{background:rgba(255,255,255,.08);border:none;color:#fff;font-size:18px;width:30px;height:30px;border-radius:6px;cursor:pointer;display:flex;align-items:center;justify-content:center}
    .history-stats{flex:0 0 auto;display:flex;background:#0f1d35;border-bottom:1px solid rgba(255,255,255,.06)}
    .hstat{flex:1;padding:8px 4px;text-align:center;border-right:1px solid rgba(255,255,255,.05)}
    .hstat:last-child{border-right:none}
    .hstat-label{font-size:8px;color:#8b9cb5;margin-bottom:2px}
    .hstat-value{font-size:13px;font-weight:900}
    .history-tabs{flex:0 0 auto;display:flex;padding:6px 8px;gap:5px;background:#0f1d35;border-bottom:1px solid rgba(255,255,255,.05)}
    .htab{flex:1;padding:6px 8px;background:transparent;border:1px solid rgba(255,255,255,.1);border-radius:6px;color:#8b9cb5;font-size:10px;font-weight:700;cursor:pointer;transition:all .2s}
    .htab.active{background:rgba(59,130,246,.2);border-color:rgba(59,130,246,.4);color:#fff}
    #historyContent{flex:1;overflow-y:auto;padding:8px;-webkit-overflow-scrolling:touch}
    .trade-record{background:#0f1d35;border-radius:10px;padding:10px 12px;margin-bottom:8px;border:1px solid rgba(255,255,255,.08)}
    .tr-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
    .tr-badge{display:flex;align-items:center;gap:6px}
    .tr-type{font-size:10px;font-weight:900;padding:2px 8px;border-radius:4px}
    .tr-type.buy{background:rgba(0,204,0,.15);color:#00cc00;border:1px solid rgba(0,204,0,.3)}
    .tr-type.sell{background:rgba(255,51,51,.15);color:#ff5555;border:1px solid rgba(255,51,51,.3)}
    .tr-status{font-size:9px;padding:2px 6px;border-radius:4px;font-weight:700}
    .tr-status.won{background:rgba(0,204,0,.15);color:#00cc00}
    .tr-status.lost{background:rgba(255,51,51,.15);color:#ff5555}
    .tr-status.active{background:rgba(255,215,0,.15);color:#ffd700}
    .tr-pnl{font-size:14px;font-weight:900}
    .tr-pnl.win{color:#00cc00}
    .tr-pnl.loss{color:#ff5555}
    .tr-pnl.active-pnl{color:#ffd700}
    .tr-details{display:grid;grid-template-columns:repeat(3,1fr);gap:6px}
    .tr-detail{display:flex;flex-direction:column;gap:2px}
    .tr-detail-label{font-size:8px;color:#8b9cb5;font-weight:600}
    .tr-detail-value{font-size:9.5px;font-weight:700;color:#fff}
    .loading-text,.empty-history{text-align:center;color:#8b9cb5;padding:40px 20px;font-size:12px}

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       RESULT TOAST (unchanged)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .result-toast{position:fixed;bottom:85px;left:50%;transform:translateX(-50%) translateY(150px);background:#0f1d35;border-radius:14px;padding:14px 24px;z-index:500;transition:transform .35s cubic-bezier(.34,1.56,.64,1),opacity .35s;border:2px solid transparent;min-width:220px;text-align:center;opacity:0;pointer-events:none}
    .result-toast.show{transform:translateX(-50%) translateY(0);opacity:1;pointer-events:auto}
    .result-toast.win{border-color:#00cc00;box-shadow:0 0 25px rgba(0,204,0,.3)}
    .result-toast.lose{border-color:#ff3333;box-shadow:0 0 25px rgba(255,51,51,.3)}
    .toast-emoji{font-size:26px;margin-bottom:4px;display:block}
    .toast-title{font-size:13px;font-weight:900;color:#fff;margin-bottom:4px}
    .toast-amount{font-size:20px;font-weight:900;margin-bottom:4px}
    .toast-price{font-size:9px;color:#8b9cb5}

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       INFO TOAST (unchanged)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .info-toast{position:fixed;top:70px;left:50%;transform:translateX(-50%) translateY(-80px);background:#1a2942;border:1px solid rgba(255,255,255,.15);border-radius:8px;padding:8px 16px;z-index:500;transition:transform .3s ease,opacity .3s;font-size:11px;font-weight:700;color:#fff;opacity:0;pointer-events:none;white-space:nowrap;direction:rtl}
    .info-toast.show{transform:translateX(-50%) translateY(0);opacity:1}
    .info-toast.buy{border-color:rgba(0,204,0,.5)}
    .info-toast.sell{border-color:rgba(255,51,51,.5)}
    .info-toast.error{border-color:rgba(255,200,0,.5);background:#1a1a2e}

    /* =========================================================
       âœ… IMPORTED UI FROM 2nd CODE (Pairs + Time/Amount + Accounts)
       (Applied without breaking existing IDs/events)
    ========================================================= */
    :root{
      --bg-primary:#000;
      --bg-secondary:#0d1117;
      --bg-card:#101a2f;
      --bg-overlay:rgba(10,22,40,.72);
      --border-primary:rgba(255,255,255,.10);
      --border-secondary:#1f2937;
      --text-primary:#fff;
      --text-secondary:#d9e6ff;
      --accent-blue:#4299e1;
    }

    /* Accounts Switch */
    .balance{
      display:flex;align-items:center;gap:7px;
      background:linear-gradient(135deg,var(--bg-card) 0%,var(--bg-secondary) 100%);
      border:1.5px solid var(--border-primary);
      border-radius:12px;padding:8px 12px;
      cursor:pointer;position:relative;transition:.2s;
      box-shadow:0 4px 12px rgba(0,0,0,.4);
      z-index:2601;min-width:190px;
    }
    .balanceMain{display:flex;align-items:center;gap:7px;flex:1;min-width:0}
    .balance .balance-amount{font-size:15px;font-weight:900;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .arrow-down{width:14px;height:14px;margin-right:2px;transition:transform .2s}
    .balance.open .arrow-down{transform:rotate(180deg)}
    .flag-icon{width:20px;height:14px;border-radius:3px;box-shadow:0 2px 4px rgba(0,0,0,.3)}

    .accMenu{
      position:fixed;
      top:58px;
      right:8.8px;
      width:240px;
      background:linear-gradient(145deg,var(--bg-card) 0%,var(--bg-secondary) 100%);
      border:2px solid var(--border-primary);
      border-radius:16px;
      box-shadow:0 12px 32px rgba(0,0,0,.6),0 0 0 1px rgba(255,255,255,.05) inset;
      padding:10px;
      z-index:99999;
      display:none;
    }
    .accMenu.show{display:block}
    .accSwitch{display:flex;gap:8px;background:var(--bg-secondary);border-radius:10px;padding:4px;margin-bottom:12px}
    .accSwitchBtn{
      flex:1;padding:8px;border-radius:8px;font-size:11px;font-weight:900;
      transition:.2s;border:1.5px solid transparent;
      display:flex;align-items:center;justify-content:center;gap:5px;background:transparent;color:#fff;
    }
    .accSwitchBtn.live{color:#00ff41}
    .accSwitchBtn.demo{color:#ffd700}
    .accSwitchBtn.active{background:rgba(255,255,255,.1);border-color:currentColor}
    .accItem{
      background:rgba(255,255,255,.03);
      border:1.3px solid var(--border-primary);
      border-radius:12px;
      padding:10px 12px;
      margin-bottom:9px;
      cursor:pointer;
      transition:.15s;
      display:flex;align-items:center;justify-content:space-between;gap:10px;
    }
    .accItem.active{
      background:linear-gradient(135deg,rgba(66,153,225,.15) 0%,rgba(49,130,206,.1) 100%);
      border-color:var(--accent-blue);
      box-shadow:0 0 12px rgba(66,153,225,.2);
    }
    .accL{display:flex;align-items:center;gap:10px;min-width:0}
    .accIco{width:22px;height:22px;object-fit:contain;filter:drop-shadow(0 2px 4px rgba(0,0,0,.4))}
    .accAmt{font-size:16px;font-weight:1000;color:var(--text-primary);white-space:nowrap}
    .refillBtn{
      width:100%;
      background:linear-gradient(135deg,var(--accent-blue) 0%,#3182ce 100%);
      border-radius:10px;padding:10px;
      font-size:12px;font-weight:1000;color:var(--text-primary);
      letter-spacing:.5px;
      box-shadow:0 4px 12px rgba(66,153,225,.4);
    }

    /* Time/Amount UI (2nd code style) */
    .timer-amount{display:flex;gap:7.2px;margin-bottom:9px}
    .control-row{display:grid;grid-template-columns:1fr 1fr;gap:8.8px;width:100%}
    .input-wrapper{
      display:flex;align-items:center;gap:4.4px;
      background:var(--bg-secondary);
      border:1.1px solid var(--border-secondary);
      border-radius:8.8px;
      padding:3.3px 6.6px;
      height:46px;
      position:relative;
      box-shadow:inset 0 2px 8px rgba(0,0,0,.4);
    }
    .input-field{
      background:transparent;
      color:var(--text-primary);
      font-size:13.75px;
      font-weight:900;
      text-align:center;
      flex:1;min-width:0;
      cursor:pointer;
      user-select:none;
      border:0;outline:0;
    }
    .ctrl-btn{background:transparent;color:var(--accent-blue);font-size:18px;padding:2px 6px;font-weight:1000;border:0;cursor:pointer}

    .timePickerPopup{
      position:absolute;
      bottom:100%;
      left:0;right:0;
      margin-bottom:6px;
      background:#000;
      border:1.5px solid var(--border-primary);
      border-radius:10px;
      padding:10px;
      z-index:99999;
      display:none;
      box-shadow:0 8px 24px rgba(0,0,0,.8);
    }
    .timePickerPopup.show{display:block}
    .timeGrid{display:grid;grid-template-columns:repeat(3,1fr);gap:6px;margin-bottom:8px}
    .timeBtn, .manualBtn{
      background:#2a3442;
      border:0;border-radius:8px;
      color:#fff;
      font-size:13px;font-weight:900;
      padding:10px;
      cursor:pointer;
      white-space:nowrap;
    }
    .manualBtn{width:100%}

    /* Pair HUD + Pair Panel (2nd code style) */
    .pair-display{display:none!important} /* old one hidden */
    .pair-box{
      position:absolute;
      left:8.8px;
      bottom:32px;
      z-index:22;
      display:inline-flex;
      align-items:center;
      gap:6.6px;
      background:var(--bg-secondary);
      border:1.1px solid var(--border-secondary);
      border-radius:11px;
      padding:5.5px 9.9px;
      cursor:pointer;
      user-select:none;
    }
    .pair-box .flags{display:flex;align-items:center;margin-inline:2px}
    .pair-box .flags img{
      width:24.2px;height:24.2px;
      border-radius:999px;
      border:2.2px solid var(--bg-card);
      margin-left:-8.8px;
      background:var(--bg-card);
    }
    .pair-box .otc{
      margin-inline-start:6.6px;
      padding:2.2px 6.6px;
      border-radius:999px;
      background:rgba(255,255,255,.10);
      border:1.1px solid rgba(255,255,255,.18);
      font-size:11px;font-weight:1000;letter-spacing:.44px;
    }
    .pairPanel{
      position:fixed;
      left:0;top:0;bottom:0;
      width:18vw;
      min-width:280px;
      max-width:420px;
      background:var(--bg-overlay);
      border-right:1.5px solid var(--border-primary);
      backdrop-filter:blur(10px);
      z-index:99998;
      transform:translateX(-105%);
      transition:transform .25s ease;
      pointer-events:auto;
      box-shadow:4px 0 24px rgba(0,0,0,.6);
    }
    .pairPanel.on{transform:translateX(0)}
    .pairHead{
      display:flex;align-items:center;justify-content:space-between;
      padding:14px 16px;
      border-bottom:1.5px solid var(--border-primary);
      background:linear-gradient(to bottom,rgba(255,255,255,.03),transparent);
      user-select:none;
    }
    .pairHead b{font-size:15px;font-weight:1000;color:var(--text-primary);letter-spacing:.3px}
    .pairClose{
      width:36px;height:36px;border-radius:11px;
      background:rgba(255,255,255,.08);
      border:1.5px solid var(--border-primary);
      color:var(--text-secondary);
      font-weight:1000;
      transition:.2s;
      cursor:pointer;
    }
    .pairList{padding:10px 12px;max-height:calc(100vh - 80px);overflow-y:auto}
    .pit{
      width:100%;
      display:flex;align-items:center;justify-content:space-between;
      gap:11px;
      padding:11px 13.2px;
      border-radius:13.2px;
      background:rgba(255,255,255,.03);
      border:1.5px solid var(--border-primary);
      color:var(--text-secondary);
      margin:6.6px 0;
      transition:.2s;
      cursor:pointer;
    }
    .pit:hover{background:rgba(255,255,255,.05)}
    .pitL{display:flex;align-items:center;gap:11px;min-width:0}
    .star{
      width:19.8px;height:19.8px;border-radius:6.6px;
      background:rgba(255,159,42,.10);
      border:1.1px solid rgba(255,159,42,.30);
      display:grid;place-items:center;
      color:#ffb357;
      font-size:13.2px;
      flex:0 0 auto;
      cursor:pointer;
    }
    .fg{display:flex;align-items:center}
    .fg img{
      width:24.2px;height:24.2px;border-radius:999px;
      border:2.2px solid var(--bg-card);
      margin-left:-8.8px;background:var(--bg-card)
    }
    .nm{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:1000}
    .bad{
      margin-inline-start:6.6px;
      padding:2.2px 6.6px;border-radius:999px;
      background:rgba(255,255,255,.08);
      border:1.1px solid var(--border-primary);
      font-size:11px;font-weight:1000;
    }
  </style>
</head>

<body>
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HEADER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="header">
    <div class="header-left">
      <!-- âœ… New account switch (same as 2nd code) + keeps #balanceAmount for your current functions -->
      <div class="balance" id="balanceBox">
        <div class="balanceMain">
          <img class="flag-icon" id="topAccIcon" src="https://cdn-icons-png.flaticon.com/128/1344/1344761.png" alt="">
          <!-- IMPORTANT: keep existing ID used by old code -->
          <span class="balance-amount" id="balanceAmount">$10,000.00</span>
        </div>

        <svg class="arrow-down" viewBox="0 0 24 24" fill="#888" aria-hidden="true">
          <path d="M7 10l5 5 5-5z"></path>
        </svg>

        <div class="accMenu" id="accMenu">
          <div class="accSwitch">
            <button class="accSwitchBtn live" data-acc="real">LIVE</button>
            <button class="accSwitchBtn demo active" data-acc="demo">Demo</button>
          </div>

          <div class="accItem" data-type="real">
            <div class="accL">
              <img class="accIco" src="https://flagcdn.com/w40/us.png" alt="">
              <div class="accAmt" id="realAmt">$0.00</div>
            </div>
          </div>

          <div class="accItem active" data-type="demo">
            <div class="accL">
              <img class="accIco" src="https://cdn-icons-png.flaticon.com/128/1344/1344761.png" alt="">
              <div class="accAmt" id="demoAmt">$10,000.00</div>
            </div>
          </div>

          <button class="refillBtn" id="refillBtn">ğŸ”„ Refill Demo Account</button>
        </div>
      </div>

      <!-- (Hidden old balance UI kept for maximum compatibility if any script expects structure) -->
      <div class="balance-box" aria-hidden="true">
        <div class="balance-content">
          <div class="balance-label">QT Real USD</div>
          <div class="balance-amount-old">$10,000.00</div>
        </div>
        <div class="balance-arrow">â–¼</div>
      </div>
    </div>

    <div class="header-center">
      <button class="wallet-btn" aria-label="Wallet">
        <img src="https://cdn-icons-png.flaticon.com/128/10167/10167706.png" alt="Wallet">
      </button>
      <button class="icon-btn logo-btn" aria-label="QT">
        <img src="https://cdn-icons-png.flaticon.com/128/18921/18921105.png" alt="QT">
      </button>
    </div>

    <!-- keep existing -->
    <div class="time-display" id="liveTime">00:00:00 UTC+3</div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CHART â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="chart-container">
    <div class="quick-actions">
      <button class="qa-btn" id="historyNavBtn" aria-label="Trade History">
        <svg width="42" height="42" viewBox="0 0 24 24" fill="none">
          <defs>
            <linearGradient id="gradBag" x1="0" y1="0" x2="24" y2="24">
              <stop offset="0%" stop-color="#4a90e2"></stop>
              <stop offset="100%" stop-color="#357abd"></stop>
            </linearGradient>
          </defs>
          <rect x="3" y="7" width="18" height="13" rx="3" stroke="url(#gradBag)" stroke-width="2" fill="none"></rect>
          <path d="M8 7V5a4 4 0 0 1 8 0v2" stroke="url(#gradBag)" stroke-width="2" stroke-linecap="round"></path>
          <line x1="7" y1="12" x2="17" y2="12" stroke="url(#gradBag)" stroke-width="1.6" stroke-linecap="round"></line>
        </svg>
      </button>

      <button class="qa-btn" aria-label="Options" style="color:#4a90e2">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <line x1="5" y1="7" x2="19" y2="7" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line>
          <line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line>
          <line x1="5" y1="17" x2="19" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line>
        </svg>
      </button>
    </div>

    <!-- Active Trades Cards Overlay â€“ Ù…Ø®ÙÙŠ Ø¯Ø§Ø¦Ù…Ø§Ù‹ØŒ Ø§Ù„Ø´Ø§Ø±Øª ÙŠØ¹Ø±Ø¶ ÙÙ‚Ø· ØªØ±Ø§Ø¯Ùˆ Ù…Ø§Ø±ÙƒØ±Ø² -->
    <div class="active-trades-panel" id="activeTradesPanel" style="display:none"></div>

    <div class="chart-frame">
      <div class="plot" id="plot">
        <canvas id="chartCanvas"></canvas>

        <div class="price-line" id="priceLine"></div>
        <div class="candle-timer" id="candleTimer">59</div>

        <div id="priceScale">
          <div id="priceScaleLabels"></div>
          <div id="currentPrice"></div>
        </div>

        <div class="timeLabels" id="timeLabels"></div>

        <!-- âœ… New Pair HUD (same as 2nd code) -->
        <div class="pair-box" id="pairHud">
          <span id="pairHudTxt">EUR/USD</span>
          <span class="otc" id="otcHud">OTC</span>
          <span class="flags" id="pairFlags">
            <img src="https://flagcdn.com/w40/eu.png" alt="EUR">
            <img src="https://flagcdn.com/w40/us.png" alt="USD">
          </span>
          <span style="opacity:.7">â–¾</span>
        </div>

        <!-- (Hidden old pair box for compatibility) -->
        <div class="pair-display" aria-hidden="true">
          <div class="pair-flags">
            <img src="https://flagcdn.com/w80/eu.png" alt="EUR">
            <img src="https://flagcdn.com/w80/us.png" alt="USD">
          </div>
          <div class="pair-text">EUR/USD OTC</div>
        </div>

      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CONTROLS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="controls">

    <!-- âœ… Time + Amount (same style/behavior as 2nd code) â€” keeps your IDs -->
    <div class="timer-amount">
      <div class="control-row">

        <div class="input-wrapper" id="amountContainer">
          <button class="ctrl-btn" id="minusAmt">-</button>
          <input type="text" class="input-field" id="amountDisplay" value="50$">
          <button class="ctrl-btn" id="plusAmt">+</button>
        </div>

        <div class="input-wrapper" id="timeSelector">
          <span class="input-field" id="timeDisplay">00:05</span>

          <div class="timePickerPopup" id="timePickerPopup">
            <div class="timeGrid">
              <button class="timeBtn" data-time="00:00:15">15s</button>
              <button class="timeBtn" data-time="00:00:10">10s</button>
              <button class="timeBtn" data-time="00:00:05">5s</button>

              <button class="timeBtn" data-time="00:02:00">2m</button>
              <button class="timeBtn" data-time="00:01:00">1m</button>
              <button class="timeBtn" data-time="00:00:30">30s</button>

              <button class="timeBtn" data-time="00:15:00">15m</button>
              <button class="timeBtn" data-time="00:10:00">10m</button>
              <button class="timeBtn" data-time="00:05:00">5m</button>

              <button class="timeBtn" data-time="02:00:00">2h</button>
              <button class="timeBtn" data-time="01:00:00">1h</button>
              <button class="timeBtn" data-time="00:30:00">30m</button>
            </div>
            <button class="manualBtn" id="manualTimeBtn">Ø¶Ø¨Ø· ÙŠØ¯ÙˆÙŠØ§Ù‹</button>
          </div>
        </div>

      </div>
    </div>

    <div class="trade-buttons">
      <button class="trade-btn buy-btn" id="buyBtn">BUY</button>
      <button class="trade-btn ai-trade-btn">TRADING</button>
      <button class="trade-btn sell-btn" id="sellBtn">SELL</button>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• BOTTOM NAV â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="bottom-nav">
    <div class="nav-item active" id="navChart">
      <div class="nav-icon">
        <svg width="21.6" height="21.6" viewBox="0 0 24 24" fill="none">
          <rect x="2" y="2" width="20" height="20" rx="2" ry="2" stroke="currentColor" stroke-width="1.5" fill="none"></rect>
          <line x1="4" y1="20" x2="20" y2="20" stroke="currentColor" stroke-width=".8"></line>
          <line x1="4" y1="4" x2="4" y2="20" stroke="currentColor" stroke-width=".8"></line>
          <polyline points="4,16 8,12 12,14 16,8 20,10" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></polyline>
          <circle cx="4" cy="16" r="1.2" fill="currentColor"></circle>
          <circle cx="8" cy="12" r="1.2" fill="currentColor"></circle>
          <circle cx="12" cy="14" r="1.2" fill="currentColor"></circle>
          <circle cx="16" cy="8" r="1.2" fill="currentColor"></circle>
          <circle cx="20" cy="10" r="1.2" fill="currentColor"></circle>
        </svg>
      </div>
      <div>Chart</div>
    </div>

    <div class="nav-item" id="navHistory">
      <div class="nav-icon">
        <svg width="21.6" height="21.6" viewBox="0 0 24 24" fill="none">
          <rect x="3" y="7" width="18" height="14" rx="2" ry="2" fill="currentColor"></rect>
          <rect x="8" y="3" width="8" height="4" rx="1" ry="1" fill="currentColor"></rect>
          <line x1="6" y1="11" x2="18" y2="11" stroke="#0a1628" stroke-width="1"></line>
          <line x1="6" y1="14" x2="18" y2="14" stroke="#0a1628" stroke-width="1"></line>
          <line x1="6" y1="17" x2="18" y2="17" stroke="#0a1628" stroke-width="1"></line>
        </svg>
      </div>
      <div>History</div>
    </div>

    <div class="nav-item">
      <div class="nav-icon">
        <svg width="21.6" height="21.6" viewBox="0 0 24 24" fill="none">
          <circle cx="12" cy="12" r="11" stroke="currentColor" stroke-width="2" fill="none"></circle>
          <circle cx="12" cy="8" r="3" fill="currentColor"></circle>
          <path d="M6 20c0-3.3 5-5 6-5s6 1.7 6 5" fill="currentColor"></path>
        </svg>
      </div>
      <div>Profile</div>
    </div>

    <div class="nav-item">
      <div class="nav-icon">
        <svg width="21.6" height="21.6" viewBox="0 0 24 24" fill="none">
          <rect x="2" y="2" width="20" height="20" rx="3" ry="3" stroke="currentColor" stroke-width="1.5" fill="none"></rect>
          <rect x="8" y="18" width="8" height="2" fill="currentColor"></rect>
          <rect x="11" y="10" width="2" height="8" fill="currentColor"></rect>
          <path d="M6 10 C6 6, 18 6, 18 10 C18 14, 6 14, 6 10 Z" fill="currentColor"></path>
          <path d="M6 10 C4 10, 4 12, 6 12" stroke="currentColor" stroke-width="1.5" fill="none"></path>
          <path d="M18 10 C20 10, 20 12, 18 12" stroke="currentColor" stroke-width="1.5" fill="none"></path>
        </svg>
      </div>
      <div>Rank</div>
    </div>

    <div class="nav-item">
      <div class="nav-icon">
        <svg width="21.6" height="21.6" viewBox="0 0 24 24" fill="none">
          <rect x="2" y="2" width="20" height="20" rx="3" ry="3" stroke="currentColor" stroke-width="1.5" fill="none"></rect>
          <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2" fill="currentColor"></circle>
          <line x1="12" y1="2" x2="12" y2="5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></line>
          <line x1="12" y1="19" x2="12" y2="22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></line>
          <line x1="2" y1="12" x2="5" y2="12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></line>
          <line x1="19" y1="12" x2="22" y2="12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></line>
          <line x1="5" y1="5" x2="7" y2="7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></line>
          <line x1="17" y1="17" x2="19" y2="19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></line>
          <line x1="5" y1="19" x2="7" y2="17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></line>
          <line x1="17" y1="7" x2="19" y2="5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></line>
        </svg>
      </div>
      <div>Settings</div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HISTORY PANEL (slide-up) â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="history-panel" id="historyPanel">
    <div class="history-header">
      <div class="history-title">ğŸ“Š Ø³Ø¬Ù„ Ø§Ù„ØµÙÙ‚Ø§Øª</div>
      <button class="history-close-btn" id="historyCloseBtn">âœ•</button>
    </div>
    <div class="history-stats" id="historyStats">
      <div class="hstat">
        <div class="hstat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ</div>
        <div class="hstat-value" id="statTotal" style="color:#fff">0</div>
      </div>
      <div class="hstat">
        <div class="hstat-label">Ø±Ø¨Ø­</div>
        <div class="hstat-value" id="statWon" style="color:#00cc00">0</div>
      </div>
      <div class="hstat">
        <div class="hstat-label">Ø®Ø³Ø§Ø±Ø©</div>
        <div class="hstat-value" id="statLost" style="color:#ff5555">0</div>
      </div>
      <div class="hstat">
        <div class="hstat-label">ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</div>
        <div class="hstat-value" id="statPnl" style="color:#ffd700">$0</div>
      </div>
    </div>
    <div class="history-tabs">
      <button class="htab active" data-tab="all">Ø§Ù„ÙƒÙ„</button>
      <button class="htab" data-tab="active">Ù†Ø´Ø·Ø©</button>
      <button class="htab" data-tab="closed">Ù…ØºÙ„Ù‚Ø©</button>
    </div>
    <div id="historyContent">
      <div class="empty-history">Ø§ÙØªØ­ Ø§Ù„ØµÙÙ‚Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù„ØªØ¸Ù‡Ø± Ù‡Ù†Ø§!</div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• RESULT TOAST â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="result-toast" id="resultToast"></div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• INFO TOAST â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="info-toast" id="infoToast"></div>

  <!-- âœ… Pair Panel (same as 2nd code) -->
  <div class="pairPanel" id="pairPanel" aria-hidden="true">
    <div class="pairHead">
      <b>Ø§Ù„Ø§Ø²ÙˆØ§Ø¬</b>
      <button class="pairClose" id="pairClose">Ã—</button>
    </div>
    <div class="pairList" id="pairList"></div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FIREBASE COMPAT SDK â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MAIN SCRIPT (your existing logic) â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <script src="script.js"></script>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• UI BRIDGE SCRIPT (keeps existing functions working) â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <script>
    (() => {
      const $ = (id) => document.getElementById(id);

      /* =========================
         1) Accounts Switch (LIVE/DEMO) â€” UI only + keeps #balanceAmount synced
      ========================= */
      const balanceBox = $("balanceBox");
      const accMenu = $("accMenu");
      const refillBtn = $("refillBtn");
      const balanceAmountEl = $("balanceAmount");

      const state = window.QT_UI_STATE = window.QT_UI_STATE || {};
      state.accounts = state.accounts || { active: "demo", demo: 10000, real: 0 };

      const fmt = (v) => "$" + Number(v || 0).toFixed(2);

      function updateAccountUI() {
        $("demoAmt").textContent = fmt(state.accounts.demo);
        $("realAmt").textContent = fmt(state.accounts.real);

        const active = state.accounts.active;
        balanceAmountEl.textContent = fmt(active === "demo" ? state.accounts.demo : state.accounts.real);

        $("topAccIcon").src = active === "real"
          ? "https://flagcdn.com/w40/us.png"
          : "https://cdn-icons-png.flaticon.com/128/1344/1344761.png";

        document.querySelectorAll(".accItem").forEach(x => {
          x.classList.toggle("active", x.dataset.type === active);
        });
        document.querySelectorAll(".accSwitchBtn").forEach(x => {
          x.classList.toggle("active", x.dataset.acc === active);
        });

        // broadcast (if your current logic cares)
        window.dispatchEvent(new CustomEvent("QT_ACCOUNT_CHANGED", { detail: { active, demo: state.accounts.demo, real: state.accounts.real } }));
      }

      if (balanceBox && accMenu) {
        balanceBox.addEventListener("click", (e) => {
          if (e.target.closest(".accMenu")) return;
          e.stopPropagation();
          accMenu.classList.toggle("show");
          balanceBox.classList.toggle("open");
        });

        document.addEventListener("click", (e) => {
          if (!e.target.closest("#balanceBox")) {
            accMenu.classList.remove("show");
            balanceBox.classList.remove("open");
          }
        });

        document.querySelectorAll(".accSwitchBtn").forEach(btn => {
          btn.addEventListener("click", (e) => {
            e.stopPropagation();
            state.accounts.active = btn.dataset.acc;
            updateAccountUI();
          });
        });

        document.querySelectorAll(".accItem").forEach(item => {
          item.addEventListener("click", (e) => {
            e.stopPropagation();
            state.accounts.active = item.dataset.type;
            updateAccountUI();
          });
        });

        if (refillBtn) {
          refillBtn.addEventListener("click", (e) => {
            e.stopPropagation();
            state.accounts.demo = 10000;
            updateAccountUI();
            refillBtn.textContent = "âœ…";
            setTimeout(() => refillBtn.textContent = "ğŸ”„ Refill Demo Account", 900);
          });
        }

        // If any existing logic edits #balanceAmount later, keep demo amount in sync too
        const obs = new MutationObserver(() => {
          const txt = (balanceAmountEl.textContent || "").trim();
          if (/^\$/.test(txt)) {
            const v = parseFloat(txt.replace(/[^\d.]/g, ""));
            if (Number.isFinite(v) && state.accounts.active === "demo") {
              state.accounts.demo = v;
              $("demoAmt").textContent = fmt(v);
            }
          }
        });
        obs.observe(balanceAmountEl, { childList:true, characterData:true, subtree:true });

        updateAccountUI();
      }

      /* =========================
         2) Time Picker Popup â€” uses #timeDisplay (same ID)
      ========================= */
      const timeDisplay = $("timeDisplay");
      const timePopup = $("timePickerPopup");
      const manualBtn = $("manualTimeBtn");
      let manualMode = false;

      function hhmmssToSeconds(str) {
        const m = String(str).match(/^(\d{2}):(\d{2}):(\d{2})$/);
        if (!m) return 60;
        return (+m[1])*3600 + (+m[2])*60 + (+m[3]);
      }
      function secondsToDisplay(sec) {
        sec = Math.max(1, sec|0);
        const h = Math.floor(sec/3600);
        const m = Math.floor((sec%3600)/60);
        const s = sec%60;
        return h > 0
          ? `${String(h).padStart(2,"0")}:${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}`
          : `${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}`;
      }
      function setTimeFromHHMMSS(hhmmss) {
        const sec = hhmmssToSeconds(hhmmss);
        timeDisplay.textContent = secondsToDisplay(sec);
        timeDisplay.dataset.sec = String(sec);
        window.dispatchEvent(new CustomEvent("QT_TIME_CHANGED", { detail: { seconds: sec, text: timeDisplay.textContent } }));
      }

      if (timeDisplay && timePopup) {
        timeDisplay.addEventListener("click", (e) => {
          if (manualMode) return;
          e.stopPropagation();
          timePopup.classList.toggle("show");
        });

        document.addEventListener("click", (e) => {
          if (!e.target.closest("#timeSelector")) timePopup.classList.remove("show");
        });

        timePopup.querySelectorAll(".timeBtn").forEach(btn => {
          btn.addEventListener("click", (e) => {
            e.stopPropagation();
            setTimeFromHHMMSS(btn.getAttribute("data-time"));
            timePopup.classList.remove("show");
          });
        });

        if (manualBtn) {
          manualBtn.addEventListener("click", (e) => {
            e.stopPropagation();
            manualMode = !manualMode;
            if (manualMode) {
              timePopup.classList.remove("show");
              const currentSec = +(timeDisplay.dataset.sec || 5);
              const h = Math.floor(currentSec/3600);
              const m = Math.floor((currentSec%3600)/60);
              const s = currentSec%60;
              const def = `${String(h).padStart(2,"0")}:${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}`;
              const v = prompt("Ø§ÙƒØªØ¨ Ø§Ù„ÙˆÙ‚Øª Ø¨ØµÙŠØºØ© HH:MM:SS", def);
              if (v && /^\d{2}:\d{2}:\d{2}$/.test(v)) setTimeFromHHMMSS(v);
              manualMode = false;
            }
          });
        }

        // init default 5 seconds
        if (!timeDisplay.dataset.sec) timeDisplay.dataset.sec = "5";
      }

      /* =========================
         3) Amount +/- â€” uses #amountDisplay (same ID)
      ========================= */
      const amountInput = $("amountDisplay");
      const plusAmt = $("plusAmt");
      const minusAmt = $("minusAmt");

      function readAmount() {
        const raw = String(amountInput.value || "").replace(/[^\d.]/g, "").trim();
        let v = parseFloat(raw);
        if (!isFinite(v)) v = 1;
        v = Math.max(1, Math.min(999999, v));
        return v;
      }
      function writeAmount(v) {
        amountInput.value = v + "$";
        window.dispatchEvent(new CustomEvent("QT_AMOUNT_CHANGED", { detail: { amount: v } }));
      }

      if (amountInput) {
        amountInput.addEventListener("input", () => writeAmount(readAmount()));
        amountInput.addEventListener("blur", () => writeAmount(readAmount()));
        if (plusAmt) plusAmt.addEventListener("click", () => writeAmount(readAmount() + 1));
        if (minusAmt) minusAmt.addEventListener("click", () => writeAmount(Math.max(1, readAmount() - 1)));
        writeAmount(readAmount());
      }

      /* =========================
         4) Pair HUD + Pair Panel (same open/layer)
      ========================= */
      const pairHud = $("pairHud");
      const pairPanel = $("pairPanel");
      const pairClose = $("pairClose");
      const pairList = $("pairList");
      const pairHudTxt = $("pairHudTxt");
      const pairFlags = $("pairFlags");

      const flagMap = {
        AED:"ae", CNY:"cn", AUD:"au", CAD:"ca", CHF:"ch", BHD:"bh",
        EUR:"eu", RUB:"ru", USD:"us", KES:"ke", LBP:"lb", QAR:"qa",
        TRY:"tr", SYP:"sy", EGP:"eg", INR:"in"
      };
      const mkFlag = (c) => `https://flagcdn.com/w40/${(flagMap[c] || c || "un").toLowerCase()}.png`;

      // Ù†ÙØ³ ÙÙƒØ±Ø© Ø§Ù„Ø¯Ø§ØªØ§ (OTC + payout) â€” UI layer only
      const pairs = [
        { pair:"AED/CNY", otc:true, payout:0.91, flags:["AED","CNY"] },
        { pair:"AUD/CAD", otc:true, payout:0.88, flags:["AUD","CAD"] },
        { pair:"AUD/CHF", otc:true, payout:0.92, flags:["AUD","CHF"] },
        { pair:"BHD/CNY", otc:true, payout:0.86, flags:["BHD","CNY"] },
        { pair:"EUR/RUB", otc:true, payout:0.77, flags:["EUR","RUB"] },
        { pair:"EUR/USD", otc:true, payout:0.92, flags:["EUR","USD"] },
        { pair:"KES/USD", otc:true, payout:0.84, flags:["KES","USD"] },
        { pair:"LBP/USD", otc:true, payout:0.79, flags:["LBP","USD"] },
        { pair:"QAR/CNY", otc:true, payout:0.83, flags:["QAR","CNY"] },
        { pair:"USD/CHF", otc:true, payout:0.89, flags:["USD","CHF"] },
        { pair:"SYP/TRY", otc:true, payout:0.87, flags:["SYP","TRY"] },
        { pair:"EGP/USD", otc:true, payout:0.78, flags:["EGP","USD"] },
        { pair:"USD/INR", otc:true, payout:0.90, flags:["USD","INR"] }
      ];

      const fav = new Set();

      function renderPairFlags(p) {
        const item = pairs.find(x => x.pair === p);
        const fl = item?.flags || String(p).split("/");
        pairFlags.innerHTML = fl.map(x => `<img src="${mkFlag(x)}" alt="${x}">`).join("");
      }

      function renderPairs() {
        if (!pairList) return;
        const arr = [...pairs].sort((a,b) => {
          const fa = fav.has(a.pair) ? 1 : 0;
          const fb = fav.has(b.pair) ? 1 : 0;
          if (fa !== fb) return fb - fa;
          return a.pair.localeCompare(b.pair);
        });

        pairList.innerHTML = arr.map(x => {
          const [a,b] = x.pair.split("/");
          const star = fav.has(x.pair) ? "â˜…" : "â˜†";
          const pct = Math.round(x.payout * 100) + "%";
          return `
            <button class="pit" data-p="${x.pair}">
              <span class="pitL">
                <span class="star" data-s="1">${star}</span>
                <span class="fg">
                  <img src="${mkFlag(a)}" alt="${a}">
                  <img src="${mkFlag(b)}" alt="${b}">
                </span>
                <span class="nm">${x.pair}<span class="bad">OTC</span></span>
              </span>
              <span>+${pct}</span>
            </button>
          `;
        }).join("");
      }

      function setPair(p) {
        pairHudTxt.textContent = p;
        renderPairFlags(p);

        // Ù„Ùˆ Ø¹Ù†Ø¯Ùƒ ÙÙŠ script.js ÙˆØ¸ÙŠÙØ© ØªØºÙŠÙŠØ± Ø§Ù„Ø²ÙˆØ¬ØŒ ØªÙ‚Ø¯Ø± ØªØ±Ø¨Ø·Ù‡Ø§ Ø¨Ø§Ù„Ø§Ø³Ù… Ø¯Ù‡
        if (typeof window.onPairSelect === "function") {
          window.onPairSelect(p);
        } else {
          // ØºÙŠØ± ÙƒØ¯Ù‡ Ø¨Ù†Ø¨Ø¹Øª Event Ø¹Ø§Ù… (Ù…Ù† ØºÙŠØ± Ù…Ø§ Ù†ÙƒØ³Ø± ÙˆØ¸Ø§Ø¦ÙÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©)
          window.dispatchEvent(new CustomEvent("QT_PAIR_CHANGED", { detail: { pair: p } }));
        }
      }

      if (pairHud && pairPanel) {
        pairHud.addEventListener("click", (e) => {
          e.stopPropagation();
          pairPanel.classList.toggle("on");
          pairPanel.setAttribute("aria-hidden", pairPanel.classList.contains("on") ? "false" : "true");
          renderPairs();
        });

        if (pairClose) pairClose.addEventListener("click", () => {
          pairPanel.classList.remove("on");
          pairPanel.setAttribute("aria-hidden","true");
        });

        document.addEventListener("click", (e) => {
          if (pairPanel.classList.contains("on")
              && !e.target.closest("#pairPanel")
              && !e.target.closest("#pairHud")) {
            pairPanel.classList.remove("on");
            pairPanel.setAttribute("aria-hidden","true");
          }
        });

        if (pairList) {
          pairList.addEventListener("click", (e) => {
            const btn = e.target.closest("button.pit");
            if (!btn) return;
            const p = btn.getAttribute("data-p");

            // favorite
            if (e.target && e.target.getAttribute && e.target.getAttribute("data-s")) {
              fav.has(p) ? fav.delete(p) : fav.add(p);
              renderPairs();
              return;
            }

            pairPanel.classList.remove("on");
            pairPanel.setAttribute("aria-hidden","true");
            setPair(p);
          });
        }

        // init
        setPair("EUR/USD");
      }
    })();
  </script>
</body>
</html>
